<div class="c-input-group group-content-filter">
  <button class="c-button c-button--brand"><i class="fa fa-search"></i></button>
  <div class="o-field">
    <input class="c-field" name="cr_content_filter" id="cr_content_filter"
           value="{{ app.session.get('cr_content_filter') }}"
           placeholder="{{ t('crelish', 'Type your search phrase here...') }}">
  </div>
</div>

<script>
  $(document).ready(function () {
    $('#cr_content_filter').on("blur", function (e) {
      e.preventDefault();
      if (window.location.href.indexOf('cr_content_filter') >= 0) {
        $.pjax({
          url: window.location.href.replace(/(cr_content_filter=).*?(&|$)/, '$1' + $(this).val() + '$2'),
          container: '#assetList'
        });
      } else {
        var preFix = (window.location.href.indexOf("?") >= 0) ? '&' : '?';
        $.pjax({url: window.location.href + preFix + "cr_content_filter=" + $(this).val(), container: '#assetList'});
      }
    });

    $('#cr_content_filter').on("keypress", function (e) {
      if (e.which == 10 || e.which == 13) {
        if (window.location.href.indexOf('cr_content_filter') >= 0) {
          $.pjax({
            url: window.location.href.replace(/(cr_content_filter=).*?(&|$)/, '$1' + $(this).val() + '$2'),
            container: '#assetList'
          });
        } else {
          var preFix = (window.location.href.indexOf("?") >= 0) ? '&' : '?';
          $.pjax({url: window.location.href + preFix + "cr_content_filter=" + $(this).val(), container: '#assetList'});
        }
      }
    });
  });
</script>
